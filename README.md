Using the pipeline-utils to incorporate new studies to an existing pipeline.


## Demo

```bash
# From the repository root run the requirements
pip install -r requirements.txt

# Run dbt commands from the dir containing the dbt_project.yml. 
cd dbt_project

generate_pipeline -sc '_study_data/moomoo/_moomoo_study.yaml' -d '_pipeline_data'

dbt deps

import_data -sc '_study_data/moomoo/_moomoo_study.yaml' -d '_pipeline_data'

dbt show --select include_moomoo_src_condition

# Example dbt run commands were generated in: dbt_project/run_commands/include/moomoo/run_moomoo_20250119.sh. 

# Generate and serve documentation
dbt docs generate && dbt docs serve

# ---------------------------------------------------------

# Once familiar with the pipeline structure try adding another study
generate_pipeline -sc '_study_data/bleat/_bleat_study.yaml' -d '_pipeline_data'

dbt deps

import_data -sc '_study_data/bleat/_bleat_study.yaml' -d '_pipeline_data'

dbt show --select include_bleat_src_condition

# Generate and serve documentation
dbt docs generate && dbt docs serve
```


## Documentation & Resources

### Development Tools

- [Harlequin](https://harlequin.sh/) — SQL IDE for interactive DuckDB querying
  ```bash
  # Once setup, run this command to query via the terminal
  harlequin -r "/tmp/dbt.duckdb"
  ```

- [dbt-pipeline-utils GitHub](https://github.com/NIH-NCPI/pipeline-utils) — Main utilities repository
```bash
# Uninstall and reinstall the utils if necessary.
pip uninstall dbt_pipeline_utils 
pip install --no-cache-dir "dbt_pipeline_utils @ git+https://github.com/NIH-NCPI/pipeline-utils.git@bg/refactor_test_utils"
```

### dbt Resources
- [dbt Documentation](https://docs.getdbt.com/docs/introduction) — Learn dbt fundamentals
- [dbt Discourse](https://discourse.getdbt.com/) — Common questions and answers
- [dbt Community Slack](https://community.getdbt.com/) — Real-time discussions and support
- [dbt Events](https://events.getdbt.com) — Webinars and conferences
- [dbt Blog](https://blog.getdbt.com/) — Best practices and updates


### Starting a dbt pipeline repo from scratch. Steps to set up this demo. 
- Create and pull down a new GitHub repo
- Run `dbt init` in the terminal - name the project 'dbt_project'
- Create a data dir for study specific data. Demo purposes - demo_project/_study_data
- Gather study data and store locally.
- Create a data dir for pipeline specific data. Demo purposes - demo_project/_pipeline_data
- Gather pipeline specific data and store locally.
- Add gitignore
- delete root dbt_project.yml to be regenerated by the utils
- Add and run requirements.txt
